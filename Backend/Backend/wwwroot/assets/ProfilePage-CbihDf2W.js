import{b as A,r as o,j as t,B as p,c as L}from"./index-BkwN6ugi.js";import{P as G}from"./Page-nSfMCqEi.js";import{I as Z}from"./InputField-BHtlVtRS.js";import{B as _}from"./Button-CqxvuVq1.js";import{A as I}from"./Alert-BQ6Usg0_.js";import{F as J}from"./TextField-Xo4kt7zH.js";import{S as q}from"./Select-CVW7Cr0N.js";import{M as u}from"./MenuItem-CRWMkGek.js";import"./Grow-CBhhKj-Z.js";import"./isHostComponent-DVu5iVWx.js";import"./isMuiElement-BIwZpEg9.js";import"./List-CSE9cjs2.js";import"./listItemTextClasses-DSEbLqNk.js";const M="http://localhost:5001",D=async()=>{try{return(await A.get(`${M}/api/User/profile`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data}catch(r){throw console.error("Error fetching user profile:",r),r}},H=async r=>{var l;try{const a=localStorage.getItem("token");if(!a)throw new Error("User is not authenticated. Token missing.");if(!r.dateOfBirth||r.dateOfBirth.trim()==="")r.dateOfBirth=null;else{const i=new Date(r.dateOfBirth);isNaN(i.getTime())?r.dateOfBirth=null:r.dateOfBirth=i.toISOString()}return(await A.put(`${M}/api/User/profile`,JSON.stringify(r),{headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}})).data}catch(a){throw console.error("Error updating user profile:",((l=a.response)==null?void 0:l.data)||a.message),a}},K=()=>{const[r,l]=o.useState(""),[a,n]=o.useState(""),[i,h]=o.useState(""),[m,x]=o.useState(""),[f,g]=o.useState(""),[d,b]=o.useState(""),[v,S]=o.useState(""),[y,B]=o.useState(""),[j,C]=o.useState(""),[N,O]=o.useState(""),[P,w]=o.useState(""),[F,c]=o.useState(""),[E,k]=o.useState("");o.useEffect(()=>{(async()=>{try{const e=await D();l(e.firstName||""),n(e.lastName||""),h(e.email||""),x(e.phoneNumber||""),g(e.dateOfBirth?new Date(e.dateOfBirth).toISOString().split("T")[0]:""),b(e.gender!==null?e.gender?"Male":"Female":""),S(e.address||""),B(e.city||""),C(e.state||""),O(e.country||""),w(e.zipCode||"")}catch{c("Failed to load profile.")}})()},[]);const U=async s=>{s.preventDefault(),c(""),k("");try{await H({firstName:r,lastName:a,email:i,phoneNumber:m,dateOfBirth:f,gender:d==="Male"?!0:d==="Female"?!1:null,address:v,city:y,state:j,country:N,zipCode:P}),k("Profile updated successfully!")}catch{c("Failed to update profile.")}};return t.jsxs(p,{component:"form",onSubmit:U,sx:{maxWidth:"600px",margin:"0 auto",backgroundColor:"var(--card-background)",color:"var(--text-color)",padding:"24px",borderRadius:"16px",boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.1)",transition:"box-shadow 0.3s ease","&:hover":{boxShadow:"0px 8px 16px rgba(0, 0, 0, 0.2)"}},children:[t.jsx(L,{variant:"h5",sx:{marginBottom:"16px",fontWeight:"bold",color:"var(--text-color)"},children:"Update Profile"}),F&&t.jsx(I,{severity:"error",sx:{mb:2},children:F}),E&&t.jsx(I,{severity:"success",sx:{mb:2},children:E}),[{placeholder:"First Name",value:r,setter:l},{placeholder:"Last Name",value:a,setter:n},{placeholder:"Email",value:i,setter:h,disabled:!0},{placeholder:"Phone Number",value:m,setter:x},{placeholder:"Date of Birth",value:f,setter:g,type:"date"},{placeholder:"Address",value:v,setter:S},{placeholder:"City",value:y,setter:B},{placeholder:"State",value:j,setter:C},{placeholder:"Country",value:N,setter:O},{placeholder:"Zip Code",value:P,setter:w}].map(({placeholder:s,value:e,setter:R,type:W="text",disabled:T=!1},z)=>t.jsx(p,{mb:3,children:t.jsx(Z,{placeholder:s,fullWidth:!0,value:e,onChange:$=>R($.target.value),type:W,disabled:T,sx:{input:{color:"var(--text-color)",backgroundColor:"var(--input-background)",border:"1px solid var(--input-border-color)",borderRadius:"8px",padding:"12px","&::placeholder":{color:"var(--text-color)"}}}})},z)),t.jsx(p,{mb:3,children:t.jsx(J,{fullWidth:!0,sx:{backgroundColor:"var(--input-background)"},children:t.jsxs(q,{value:d,onChange:s=>b(s.target.value),displayEmpty:!0,sx:{borderRadius:"8px","& .MuiOutlinedInput-notchedOutline":{borderColor:"var(--input-border-color)"},"& .MuiSelect-icon":{color:"var(--text-color)"},color:"var(--text-color)"},children:[t.jsx(u,{value:"",disabled:!0,children:"Gender"}),t.jsx(u,{value:"Male",children:"Male"}),t.jsx(u,{value:"Female",children:"Female"})]})})}),t.jsx(_,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,sx:{borderRadius:"8px",padding:"12px 16px"},children:"Update Profile"})]})},de=()=>t.jsx(G,{style:{padding:"32px 16px",maxWidth:"500px",margin:"0 auto"},children:t.jsx(K,{})});export{de as default};
