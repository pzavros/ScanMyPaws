import{u as R,j as e,S as h,B as i,a as P,b as p,r as d,T as o,P as v,c as f}from"./index-BkwN6ugi.js";import{S as g}from"./SectionTitle-BIhqTMd9.js";import{R as w,C as I}from"./Card-CINt_dWY.js";import{P as j}from"./Page-nSfMCqEi.js";import{L as C}from"./LoadingIndicator-CnG4_zX-.js";import{B as b}from"./Button-CqxvuVq1.js";const D=({pet:t,pets:r=[],currentPetIndex:c,onDotClick:a})=>{const s=R();return t?e.jsx(h,{children:e.jsxs(i,{textAlign:"center",mb:4,sx:{padding:"16px",backgroundColor:"var(--card-background)",borderRadius:"16px",boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e.jsx(g,{sx:{fontSize:"1.8rem",fontWeight:"bold",color:"var(--text-color)",textAlign:"center"},children:t.petName||"Unknown"}),t.photo&&e.jsx("img",{src:`data:image/jpeg;base64,${t.photo}`,alt:t.petName||"Pet",style:{borderRadius:"50%",width:"120px",height:"120px",marginBottom:"16px",border:"3px solid var(--primary-color)"}}),e.jsx(P,{variant:"contained",color:"primary",onClick:()=>s(`/pets/${t.petID}`),sx:{borderRadius:"24px",padding:"8px 24px",fontSize:"1rem",textTransform:"capitalize",marginTop:"16px",background:"linear-gradient(90deg, rgba(255,111,97,1) 0%, rgba(255,165,97,1) 100%)",color:"#fff",textTransform:"none",fontWeight:"bold",borderRadius:"50px","&:hover":{background:"linear-gradient(90deg, rgba(255,165,97,1) 0%, rgba(255,111,97,1) 100%)"}},children:"View Profile"}),e.jsx(i,{mt:2,display:"flex",justifyContent:"center",alignItems:"center",children:r.map((y,x)=>e.jsx(i,{onClick:()=>a(x),sx:{width:"10px",height:"10px",margin:"0 5px",borderRadius:"50%",backgroundColor:c===x?"var(--primary-color)":"gray",cursor:"pointer",transition:"background-color 0.3s ease"}},x))})]})}):e.jsx("div",{children:"Loading pets..."})},m="http://localhost:5001",$=async t=>{try{return(await p.get(`${m}/api/schedules/user/${t}/upcoming-tasks`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data||[]}catch{return[]}},N=async t=>{try{return(await p.get(`${m}/api/notifications/user/${t}/recent`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data||[]}catch{return[]}},A=async t=>{try{return(await p.get(`${m}/api/MedicalRecord/pet/${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data||[]}catch{return[]}},B=async t=>{try{return(await p.get(`${m}/api/PetProfile/pet-stats/${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data||{}}catch{return{}}},T=async()=>{var t;try{return((t=(await p.get(`${m}/api/PetProfile/user`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data)==null?void 0:t.data)||[]}catch{return[]}},z=({userId:t})=>{const[r,c]=d.useState([]);return d.useEffect(()=>{(async()=>{if(t){const s=await $(t);c(s)}})()},[t]),e.jsx(h,{children:e.jsxs(i,{mb:3,children:[e.jsx(g,{mb:1,children:"Upcoming Tasks"}),e.jsx(w,{children:r.length===0?e.jsx(o,{variant:"body1",align:"center",children:"No upcoming tasks."}):r.map((a,s)=>e.jsxs(I,{children:[e.jsx(o,{variant:"body1",fontWeight:"bold",children:a.title}),e.jsx(o,{variant:"body2",children:a.description})]},s))})]})})},E=({petId:t})=>{const[r,c]=d.useState([]);return d.useEffect(()=>{(async()=>{if(t){const s=await N(t);c(s)}})()},[t]),e.jsx(h,{children:e.jsxs(i,{mb:3,children:[e.jsx(g,{mb:1,children:"Recent Notifications"}),e.jsx(i,{sx:{display:"flex",flexDirection:"column",gap:"12px"},children:r.length===0?e.jsx(o,{children:"No recent notifications."}):r.map((a,s)=>e.jsxs(v,{elevation:2,sx:{padding:"16px",borderRadius:"12px",backgroundColor:"var(--card-background)",color:"var(--text-color)",display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[e.jsx(o,{variant:"body1",fontWeight:"bold",mb:.5,children:a.title}),e.jsx(o,{variant:"body2",sx:{fontSize:"0.875rem",color:"var(--text-color)"},children:a.time})]},a.notificationID||a.id||s))})]})})},L=({petId:t})=>{const[r,c]=d.useState([]);return d.useEffect(()=>{(async()=>{if(t){const s=await A(t);c(s)}})()},[t]),e.jsx(h,{children:e.jsxs(i,{mb:3,children:[e.jsx(g,{mb:1,children:"Medical Records Summary"}),e.jsx(i,{sx:{display:"flex",flexDirection:"column",gap:"12px"},children:r.length===0?e.jsx(o,{children:"No medical records found."}):r.map((a,s)=>e.jsxs(v,{elevation:2,sx:{padding:"16px",borderRadius:"12px",backgroundColor:"var(--card-background)",color:"var(--text-color)",display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[e.jsx(o,{variant:"body1",fontWeight:"bold",mb:.5,children:a.type}),e.jsx(o,{variant:"body2",children:a.description}),e.jsx(o,{variant:"caption",color:"gray",children:new Date(a.dateCreated).toLocaleDateString()})]},a.recordID||`record-${s}`))})]})})},M=({petId:t})=>{const[r,c]=d.useState({});return d.useEffect(()=>{(async()=>{if(t){const s=await B(t);c(s)}})()},[t]),e.jsx(h,{children:e.jsxs(i,{mb:3,children:[e.jsx(g,{mb:1,children:"Pet Stats"}),r?e.jsxs(e.Fragment,{children:[e.jsxs(o,{variant:"body1",children:["Age: ",r.age]}),e.jsxs(o,{variant:"body1",children:["Weight: ",r.weight]}),e.jsxs(o,{variant:"body1",children:["Size: ",r.size]})]}):e.jsx(o,{children:"No stats available."})]})})},F=()=>{const[t,r]=d.useState([]),[c,a]=d.useState(0),[s,y]=d.useState(!0);d.useEffect(()=>{(async()=>{try{const u=await T();r(u)}catch(u){console.error("Error fetching pets:",u)}finally{y(!1)}})()},[]);const x=()=>{a(l=>(l+1)%t.length)},S=()=>{a(l=>(l-1+t.length)%t.length)},k=l=>{a(l)},n=t[c];return s?e.jsx(j,{children:e.jsx(C,{message:"Loading pets..."})}):t.length===0?e.jsx(j,{children:e.jsxs(i,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},alignItems:"stretch",justifyContent:"space-around",p:4,mt:8,gap:4},children:[e.jsxs(i,{sx:{flex:1,display:"flex",flexDirection:"column",alignItems:{xs:"center",md:"flex-start"},textAlign:{xs:"center",md:"left"},p:2},children:[e.jsx(i,{component:"img",src:"/media/HomePage1.jpg",alt:"QR Code Illustration",sx:{width:{xs:200,md:250},mb:2}}),e.jsx(f,{variant:"h5",gutterBottom:!0,children:"Get Your QR Code"}),e.jsx(f,{variant:"body1",sx:{mb:2},children:"You haven't added any pets yet. Purchase a QR code from scanmypaws.com to register your pet."}),e.jsx(b,{variant:"contained",color:"primary",href:"https://scanmypaws.com",target:"_blank",rel:"noopener noreferrer",children:"Purchase QR Code"})]}),e.jsxs(i,{sx:{flex:1,display:"flex",flexDirection:"column",alignItems:{xs:"center",md:"flex-start"},textAlign:{xs:"center",md:"left"},p:2,borderLeft:{md:"1px solid #ccc"}},children:[e.jsx(f,{variant:"h5",gutterBottom:!0,children:"Already have a QR Code?"}),e.jsx(f,{variant:"body1",sx:{mb:2},children:"If you already received your QR code, click below to add your pet."}),e.jsx(b,{variant:"contained",color:"primary",href:"/pets",children:"Add Your Pet"})]})]})}):e.jsxs(j,{children:[e.jsx(D,{pet:n,pets:t,currentPetIndex:c,onNextPet:x,onPrevPet:S,onDotClick:k}),e.jsx(z,{petId:n==null?void 0:n.petID}),e.jsx(E,{petId:n==null?void 0:n.petID}),e.jsx(L,{petId:n==null?void 0:n.petID}),e.jsx(M,{petId:n==null?void 0:n.petID})]})};export{F as default};
