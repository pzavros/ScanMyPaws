import{b,f as B,u as D,r as x,j as r,S,c as i,B as l,h as E}from"./index-BkwN6ugi.js";import{S as w}from"./react-select.esm-DryMkWz4.js";import{B as p}from"./Button-CqxvuVq1.js";import{E as W}from"./Edit-DyYhkn_S.js";import{C as A}from"./Card-qR-nIDCf.js";import{C as $}from"./CardContent-DNEzsCUe.js";import{T as u}from"./TextField-Xo4kt7zH.js";import"./Grow-CBhhKj-Z.js";import"./isHostComponent-DVu5iVWx.js";import"./isMuiElement-BIwZpEg9.js";import"./Select-CVW7Cr0N.js";import"./List-CSE9cjs2.js";const m="http://localhost:5001",L=async n=>{try{return(await b.get(`${m}/api/PetProfile/${n}`)).data}catch(s){throw console.error("Error fetching pet details:",s),s}},T=async(n,s)=>{try{return(await b.put(`${m}/api/PetProfile/${n}`,s)).data}catch(o){throw console.error("Error updating pet details:",o),o}},U=async()=>(await b.get(`${m}/api/DogBreed`)).data,H=()=>{const{petId:n}=B();console.log("Pet ID from URL:",n);const s=D(),[o,v]=x.useState(null),[c,f]=x.useState(!1),[t,d]=x.useState({}),[y,C]=x.useState(null),[j,P]=x.useState([]);x.useEffect(()=>{(async()=>{try{if(!n){console.error("No petId provided in the URL.");return}const a=await L(n);v(a),d({...a,breed:a.breedID,weight:a.weight||"",size:a.size||""}),C(a.photo?`data:image/jpeg;base64,${a.photo}`:null);const h=await U();P(h.map(k=>({value:k.breedID,label:k.breedName})))}catch(a){console.error("Error fetching data:",a)}})()},[n]);const z=()=>{f(!c)},g=e=>{const{name:a,value:h}=e.target;d({...t,[a]:h})},I=e=>{d({...t,breed:(e==null?void 0:e.value)||null})},N=e=>{const a=e.target.files[0];a&&(d({...t,photo:a}),C(URL.createObjectURL(a)))},R=async()=>{try{const e=new FormData;e.append("PetName",t.petName),e.append("Age",t.age),e.append("BreedID",t.breed),e.append("Sex",t.sex),e.append("Weight",t.weight),e.append("Size",t.size),e.append("SpecialNotes",t.specialNotes),t.photo instanceof File&&e.append("Photo",t.photo);const a=await T(n,e);v(a),d({...a,breed:a.breedID}),f(!1)}catch(e){console.error("Error updating pet details:",e)}};return o?r.jsxs(S,{children:[r.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,mb:3,width:"100%"},children:[r.jsxs(l,{sx:{display:"flex",justifyContent:"space-around",width:"100%",gap:2},children:[r.jsx(p,{onClick:()=>s("/pets"),sx:{backgroundColor:"var(--primary-color)",color:"white",borderRadius:"20px",padding:"6px 10px",fontSize:"0.75rem",fontWeight:"bold",boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.1)",flex:1,"&:hover":{backgroundColor:"var(--secondary-color)"}},children:"Back"}),r.jsxs(p,{onClick:()=>o!=null&&o.isHavingCard?s(`/petcard/${n}`):s(`/createpetcard/${n}`),sx:{background:o!=null&&o.isHavingCard?"linear-gradient(90deg, #4caf50, #81c784)":"linear-gradient(90deg, #ff6f61, #ff9671)",color:"white",borderRadius:"28px",padding:"8px 12px",fontSize:"0.85rem",fontWeight:"bold",boxShadow:"0px 6px 12px rgba(0, 0, 0, 0.15)",flex:2,display:"flex",alignItems:"center",justifyContent:"center",gap:1,"&:hover":{background:o!=null&&o.isHavingCard?"linear-gradient(90deg, #81c784, #4caf50)":"linear-gradient(90deg, #ff9671, #ff6f61)",boxShadow:"0px 8px 16px rgba(0, 0, 0, 0.2)"}},children:[r.jsx(E,{sx:{fontSize:"1.1rem"}}),o!=null&&o.isHavingCard?"View Card":"Create Card"]}),r.jsxs(p,{onClick:z,sx:{backgroundColor:"var(--primary-color)",color:"white",borderRadius:"20px",padding:"6px 10px",fontSize:"0.75rem",fontWeight:"bold",boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.1)",flex:1,display:"flex",justifyContent:"center",alignItems:"center","&:hover":{backgroundColor:"var(--secondary-color)"}},children:[r.jsx(W,{sx:{fontSize:"1.1rem"}}),"Edit"]})]}),r.jsx(p,{onClick:()=>s(`/pet-location-history/${n}`),sx:{backgroundColor:"var(--primary-color)",color:"white",borderRadius:"20px",padding:"6px 10px",fontSize:"0.75rem",fontWeight:"bold",boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.1)",flex:1,display:"flex",justifyContent:"center",alignItems:"center","&:hover":{backgroundColor:"var(--secondary-color)"}},children:"Location History"}),!(o!=null&&o.isHavingCard)&&r.jsx(i,{variant:"body2",sx:{color:"var(--text-color-secondary)",textAlign:"center",maxWidth:"90%",fontSize:"0.75rem",marginTop:"8px"},children:`Tap "Create Card" to generate a QR code for your pet. This card helps others return your pet if it's lost.`})]}),r.jsxs(A,{sx:{maxWidth:800,margin:"0 auto",borderRadius:"16px",overflow:"hidden",boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.1)",backgroundColor:"var(--card-background)"},children:[y&&r.jsxs(l,{sx:{position:"relative",cursor:c?"pointer":"default","&:hover":c?{opacity:.8,transition:"opacity 0.3s ease-in-out"}:{}},onClick:()=>{c&&document.getElementById("imageUpload").click()},children:[r.jsx(l,{component:"img",src:y,alt:"Pet",sx:{width:"100%",maxHeight:"400px",objectFit:"cover",borderBottom:"1px solid var(--input-border-color)"}}),r.jsx("input",{id:"imageUpload",type:"file",accept:"image/*",hidden:!0,onChange:N}),c&&r.jsx(l,{sx:{position:"absolute",bottom:0,left:0,width:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white",textAlign:"center",padding:"8px 0",fontSize:"14px"},children:"Click to Replace Image"})]}),r.jsx($,{sx:{padding:"24px"},children:c?r.jsxs(l,{children:[r.jsx(u,{label:"Pet Name",name:"petName",value:t.petName,onChange:g,fullWidth:!0,sx:{mb:2,backgroundColor:"var(--input-background)",borderRadius:"8px",input:{color:"var(--text-color)"},label:{color:"var(--text-color)"}}}),r.jsx(u,{label:"Age",name:"age",value:t.age,onChange:g,fullWidth:!0,type:"number",sx:{mb:2,backgroundColor:"var(--input-background)",borderRadius:"8px",input:{color:"var(--text-color)"},label:{color:"var(--text-color)"}}}),r.jsx(i,{variant:"body1",sx:{mb:1,color:"var(--text-color)"},children:"Breed"}),r.jsx(w,{options:j,value:j.find(e=>e.value===t.breed)||null,onChange:I,placeholder:"Select Breed",styles:{control:e=>({...e,backgroundColor:"var(--input-background)",borderRadius:"8px",marginBottom:"16px"}),singleValue:e=>({...e,color:"white"}),menu:e=>({...e,backgroundColor:"var(--input-background)",zIndex:10}),menuPortal:e=>({...e,zIndex:9999}),option:(e,a)=>({...e,color:a.isSelected?"var(--primary-color)":"white",backgroundColor:a.isSelected?"var(--secondary-color)":"var(--input-background)","&:hover":{backgroundColor:"var(--primary-color-hover)"}}),placeholder:e=>({...e,color:"var(--text-color-secondary)"})},menuPortalTarget:document.body}),r.jsx(u,{label:"Weight (kg)",name:"weight",value:t.weight,onChange:g,fullWidth:!0,type:"number",sx:{mb:2,backgroundColor:"var(--input-background)",borderRadius:"8px",input:{color:"var(--text-color)"},label:{color:"var(--text-color)"}}}),r.jsx(i,{variant:"body1",sx:{mb:1,color:"var(--text-color)"},children:"Select Pet Size"}),r.jsx(w,{options:[{value:"Small",label:"Small"},{value:"Medium",label:"Medium"},{value:"Large",label:"Large"}],value:t.size?{value:t.size,label:t.size}:null,onChange:e=>d(a=>({...a,size:(e==null?void 0:e.value)||""})),placeholder:"Select Pet Size",styles:{control:e=>({...e,backgroundColor:"var(--input-background)",borderRadius:"8px",marginBottom:"16px"}),singleValue:e=>({...e,color:"white"}),menu:e=>({...e,backgroundColor:"var(--input-background)",zIndex:10}),option:(e,a)=>({...e,color:a.isSelected?"var(--primary-color)":"white",backgroundColor:a.isSelected?"var(--secondary-color)":"var(--input-background)","&:hover":{backgroundColor:"var(--primary-color-hover)"}}),placeholder:e=>({...e,color:"var(--text-color-secondary)"})}}),r.jsx(u,{label:"Special Notes",name:"specialNotes",value:t.specialNotes,onChange:g,fullWidth:!0,multiline:!0,rows:4,sx:{mt:2,mb:2,backgroundColor:"var(--input-background)",borderRadius:"8px",textarea:{color:"var(--text-color)"},label:{color:"var(--text-color)"}}}),r.jsx(p,{onClick:R,sx:{backgroundColor:"var(--primary-color)",color:"white",borderRadius:"24px",boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.1)","&:hover":{backgroundColor:"var(--primary-color-hover)"}},children:"Save Changes"})]}):r.jsxs(l,{children:[r.jsx(i,{variant:"h4",sx:{mb:3,fontWeight:"bold",color:"var(--primary-color)"},children:o.petName}),r.jsx(l,{sx:{mb:2},children:r.jsxs(i,{variant:"body1",sx:{color:"var(--text-color)"},children:["Age: ",o.age||"N/A"]})}),r.jsx(l,{sx:{mb:2},children:r.jsxs(i,{variant:"body1",sx:{color:"var(--text-color)"},children:["Breed: ",o.breedName||"N/A"]})}),r.jsx(l,{sx:{mb:2},children:r.jsxs(i,{variant:"body1",sx:{color:"var(--text-color)"},children:["Sex: ",o.sex||"N/A"]})}),r.jsx(l,{sx:{mb:2},children:r.jsxs(i,{variant:"body1",sx:{color:"var(--text-color)"},children:["Weight: ",o.weight?`${o.weight} kg`:"N/A"]})}),r.jsx(l,{sx:{mb:2},children:r.jsxs(i,{variant:"body1",sx:{color:"var(--text-color)"},children:["Size: ",o.size||"N/A"]})}),r.jsxs(l,{children:[r.jsx(i,{variant:"body1",sx:{color:"var(--text-color)"},children:"Special Notes:"}),r.jsx(i,{variant:"body1",sx:{color:"var(--text-color)"},children:o.specialNotes||"No special notes provided."})]})]})})]})]}):r.jsx(S,{children:r.jsx(i,{variant:"h6",sx:{textAlign:"center",mt:4,color:"var(--primary-color)"},children:"Loading pet details..."})})},O=()=>r.jsx(H,{});export{O as default};
