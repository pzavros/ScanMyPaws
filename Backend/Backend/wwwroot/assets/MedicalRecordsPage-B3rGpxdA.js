import{q as T,s as L,t as V,a3 as $,U,v as S,w,r as p,y as q,j as e,A as B,C as O,x as G,S as A,c as i,B as u,h as R,a as f,I as z,D as H,f as Y,G as J}from"./index-BkwN6ugi.js";import{f as K,D as Q,a as X,b as Z,c as _,d as ee,e as oe,A as re}from"./dateUtils-Dhw2N_wR.js";import{P as te}from"./Page-nSfMCqEi.js";import{E as ae}from"./Edit-DyYhkn_S.js";import{G as N}from"./Grid-CFPI6i8Q.js";import{C as ne}from"./Card-qR-nIDCf.js";import{C as ie}from"./CardContent-DNEzsCUe.js";import{T as y}from"./TextField-Xo4kt7zH.js";import{M as F}from"./MenuItem-CRWMkGek.js";import{f as se,u as le,c as ce,d as de}from"./api-nqKKu2uR.js";import"./Grow-CBhhKj-Z.js";import"./isHostComponent-DVu5iVWx.js";import"./isMuiElement-BIwZpEg9.js";import"./Select-CVW7Cr0N.js";import"./List-CSE9cjs2.js";import"./listItemTextClasses-DSEbLqNk.js";function xe(o){return T("MuiFab",o)}const P=L("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),ue=o=>{const{color:r,variant:n,classes:a,size:t}=o,g={root:["root",n,`size${S(t)}`,r==="inherit"?"colorInherit":r]},s=O(g,xe,a);return{...a,...s}},ge=V($,{name:"MuiFab",slot:"Root",shouldForwardProp:o=>U(o)||o==="classes",overridesResolver:(o,r)=>{const{ownerState:n}=o;return[r.root,r[n.variant],r[`size${S(n.size)}`],n.color==="inherit"&&r.colorInherit,r[S(n.size)],r[n.color]]}})(w(({theme:o})=>{var r,n;return{...o.typography.button,minHeight:36,transition:o.transitions.create(["background-color","box-shadow","border-color"],{duration:o.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(o.vars||o).zIndex.fab,boxShadow:(o.vars||o).shadows[6],"&:active":{boxShadow:(o.vars||o).shadows[12]},color:o.vars?o.vars.palette.text.primary:(n=(r=o.palette).getContrastText)==null?void 0:n.call(r,o.palette.grey[300]),backgroundColor:(o.vars||o).palette.grey[300],"&:hover":{backgroundColor:(o.vars||o).palette.grey.A100,"@media (hover: none)":{backgroundColor:(o.vars||o).palette.grey[300]},textDecoration:"none"},[`&.${P.focusVisible}`]:{boxShadow:(o.vars||o).shadows[6]},variants:[{props:{size:"small"},style:{width:40,height:40}},{props:{size:"medium"},style:{width:48,height:48}},{props:{variant:"extended"},style:{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48}},{props:{variant:"extended",size:"small"},style:{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34}},{props:{variant:"extended",size:"medium"},style:{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40}},{props:{color:"inherit"},style:{color:"inherit"}}]}}),w(({theme:o})=>({variants:[...Object.entries(o.palette).filter(G(["dark","contrastText"])).map(([r])=>({props:{color:r},style:{color:(o.vars||o).palette[r].contrastText,backgroundColor:(o.vars||o).palette[r].main,"&:hover":{backgroundColor:(o.vars||o).palette[r].dark,"@media (hover: none)":{backgroundColor:(o.vars||o).palette[r].main}}}}))]})),w(({theme:o})=>({[`&.${P.disabled}`]:{color:(o.vars||o).palette.action.disabled,boxShadow:(o.vars||o).shadows[0],backgroundColor:(o.vars||o).palette.action.disabledBackground}}))),pe=p.forwardRef(function(r,n){const a=q({props:r,name:"MuiFab"}),{children:t,className:g,color:s="default",component:b="button",disabled:m=!1,disableFocusRipple:l=!1,focusVisibleClassName:h,size:v="large",variant:c="circular",...C}=a,k={...a,color:s,component:b,disabled:m,disableFocusRipple:l,size:v,variant:c},j=ue(k);return e.jsx(ge,{className:B(j.root,g),component:b,disabled:m,focusRipple:!l,focusVisibleClassName:B(j.focusVisible,h),ownerState:k,ref:n,...C,classes:j,children:t})}),he=({records:o=[],onRecordSelect:r,onEdit:n,onDelete:a})=>{const[t,g]=p.useState(!1),[s,b]=p.useState(null),m=c=>{n(c)},l=c=>{b(c),g(!0)},h=()=>{g(!1),b(null)},v=()=>{console.log(s),s&&a(s),h()};return o.length?e.jsxs(A,{children:[e.jsxs(u,{sx:{textAlign:"center",marginBottom:4},children:[e.jsx(u,{sx:{display:"inline-flex",justifyContent:"center",alignItems:"center",width:60,height:60,background:"linear-gradient(135deg, #FFC1A1, #FF6F61)",borderRadius:"50%",marginBottom:1,boxShadow:"0 4px 10px rgba(0, 0, 0, 0.1)"},children:e.jsx(R,{sx:{color:"#fff",fontSize:"1.8rem"}})}),e.jsx(i,{variant:"h5",sx:{fontWeight:"bold",color:"var(--text-color)",marginBottom:1},children:"Medical Records"}),e.jsx(i,{variant:"body2",sx:{fontStyle:"italic",color:"var(--text-color)"},children:"A detailed log of your pet's health and wellness."})]}),e.jsx(N,{container:!0,spacing:4,children:o.map((c,C)=>e.jsx(N,{item:!0,xs:12,sm:6,md:4,children:e.jsx(ne,{sx:{position:"relative",background:"linear-gradient(135deg, #FFB7C5, #92E6FF)",borderRadius:"24px",boxShadow:"0 15px 30px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.1)",overflow:"hidden",transition:"transform 0.4s ease, box-shadow 0.3s ease","&:hover":{transform:"translateY(-10px)",boxShadow:"0 25px 40px rgba(0, 0, 0, 0.3)"}},children:e.jsxs(ie,{sx:{position:"relative",zIndex:2,padding:3},children:[e.jsx(u,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:50,height:50,background:"linear-gradient(135deg, #FFC1A1, #FF6F61)",borderRadius:"50%",margin:"0 auto 16px",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.1)"},children:e.jsx(R,{sx:{color:"#fff",fontSize:"1.5rem"}})}),e.jsx(i,{variant:"h6",sx:{fontWeight:"bold",textAlign:"center",color:"var(--text-color)",textShadow:"0px 1px 2px rgba(0, 0, 0, 0.8)",marginBottom:1},children:c.type}),e.jsx(i,{variant:"body2",sx:{textAlign:"center",fontStyle:"italic",color:"var(--text-color)",marginBottom:2},children:K(c.date)}),e.jsx(u,{sx:{textAlign:"center"},children:e.jsx(f,{variant:"contained",onClick:()=>r(c),sx:{borderRadius:"50px",textTransform:"none",fontWeight:"bold",padding:"8px 24px",background:"linear-gradient(135deg, #FF6F61, #FFC1A1)",color:"#fff","&:hover":{background:"linear-gradient(135deg, #FFC1A1, #FF6F61)"}},children:"View Details"})}),e.jsxs(u,{sx:{position:"absolute",top:16,right:16,display:"flex",gap:1},children:[e.jsx(z,{onClick:()=>m(c),sx:{background:"rgba(255, 255, 255, 0.3)",color:"#FF6F61","&:hover":{background:"#FFAB91"}},children:e.jsx(ae,{})}),e.jsx(z,{onClick:()=>l(c),sx:{background:"rgba(255, 255, 255, 0.3)",color:"#FF6F61","&:hover":{background:"#FFAB91"}},children:e.jsx(Q,{})})]})]})})},c.medicalRecordID||`${c.typeID}-${C}`))}),e.jsxs(X,{open:t,onClose:h,children:[e.jsx(Z,{children:"Confirm Deletion"}),e.jsx(_,{children:e.jsx(ee,{children:"Are you sure you want to delete this medical record?"})}),e.jsxs(oe,{children:[e.jsx(f,{onClick:h,color:"primary",children:"Cancel"}),e.jsx(f,{onClick:v,color:"secondary",children:"Delete"})]})]})]}):e.jsx(A,{children:e.jsx(i,{sx:{color:"var(--text-color)",textAlign:"center"},children:"No medical records available."})})},W=o=>{if(!o)return"";const r=new Date(o),n=r.getFullYear(),a=String(r.getMonth()+1).padStart(2,"0"),t=String(r.getDate()).padStart(2,"0");return`${n}-${a}-${t}`},be=({onClose:o,petID:r,onSave:n,editableRecord:a})=>{const[t,g]=p.useState({title:"",date:"",typeID:"",nextDueDate:"",description:"",notes:"",vetClinicName:""});p.useEffect(()=>{a&&g({title:a.title||"",date:W(a.date),typeID:a.typeID||"",nextDueDate:W(a.nextDueDate),description:a.description||"",notes:a.notes||"",vetClinicName:a.vetClinicName||""})},[a]);const s=l=>{const{name:h,value:v}=l.target;g({...t,[h]:v})},b=async()=>{try{const l={id:a==null?void 0:a.id,petID:parseInt(r,10),typeID:parseInt(t.typeID,10),date:t.date,nextDueDate:t.nextDueDate||null,description:t.description,notes:t.notes||null,vetClinicName:t.vetClinicName||null};await n(l,!0),o()}catch(l){console.error("Error updating record:",l)}},m=async()=>{try{const l={petID:parseInt(r,10),typeID:parseInt(t.typeID,10),date:t.date,nextDueDate:t.nextDueDate||null,description:t.description,notes:t.notes||null,vetClinicName:t.vetClinicName||null};await n(l,!1),o()}catch(l){console.error("Error creating record:",l)}};return e.jsxs(u,{sx:{display:"flex",flexDirection:"column",gap:2,maxWidth:600,margin:"0 auto",background:"var(--card-background)",padding:3,borderRadius:"16px",boxShadow:"0px 4px 20px rgba(0, 0, 0, 0.15)"},children:[e.jsx(i,{variant:"h5",sx:{marginBottom:2,color:"var(--text-color)"},children:a?"Edit Medical Record":"Add Medical Record"}),e.jsxs(y,{label:"Type",name:"typeID",value:t.typeID,onChange:s,select:!0,fullWidth:!0,required:!0,InputProps:{style:{color:"var(--text-color)",backgroundColor:"var(--input-background)"}},InputLabelProps:{style:{color:"var(--text-color)"}},children:[e.jsx(F,{value:"1",children:"Vaccination"}),e.jsx(F,{value:"2",children:"Deworming"}),e.jsx(F,{value:"3",children:"Preventive Care"}),e.jsx(F,{value:"4",children:"Surgery"}),e.jsx(F,{value:"5",children:"Routine Check-up"})]}),e.jsx(y,{label:"Date",name:"date",type:"date",value:t.date,onChange:s,fullWidth:!0,required:!0,InputProps:{style:{color:"var(--text-color)",backgroundColor:"var(--input-background)"}},InputLabelProps:{shrink:!0,style:{color:"var(--text-color)"}}}),e.jsx(y,{label:"Next Due Date",name:"nextDueDate",type:"date",value:t.nextDueDate,onChange:s,fullWidth:!0,InputProps:{style:{color:"var(--text-color)",backgroundColor:"var(--input-background)"}},InputLabelProps:{shrink:!0,style:{color:"var(--text-color)"}}}),e.jsx(y,{label:"Description",name:"description",value:t.description,onChange:s,fullWidth:!0,required:!0,multiline:!0,rows:2,InputProps:{style:{color:"var(--text-color)",backgroundColor:"var(--input-background)"}},InputLabelProps:{style:{color:"var(--text-color)"}}}),e.jsx(y,{label:"Notes",name:"notes",value:t.notes,onChange:s,fullWidth:!0,multiline:!0,rows:2,InputProps:{style:{color:"var(--text-color)",backgroundColor:"var(--input-background)"}},InputLabelProps:{style:{color:"var(--text-color)"}}}),e.jsx(y,{label:"Vet Clinic Name",name:"vetClinicName",value:t.vetClinicName,onChange:s,fullWidth:!0,InputProps:{style:{color:"var(--text-color)",backgroundColor:"var(--input-background)"}},InputLabelProps:{style:{color:"var(--text-color)"}}}),e.jsxs(u,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(f,{onClick:o,variant:"outlined",sx:{color:"var(--text-color)",borderColor:"var(--text-color)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:"Cancel"}),a?e.jsx(f,{onClick:b,variant:"contained",sx:{background:"linear-gradient(90deg, rgba(255,111,97,1) 0%, rgba(255,165,97,1) 100%)",color:"#fff","&:hover":{background:"linear-gradient(90deg, rgba(255,165,97,1) 0%, rgba(255,111,97,1) 100%)"}},children:"Update"}):e.jsx(f,{onClick:m,variant:"contained",sx:{background:"linear-gradient(90deg, rgba(97,255,111,1) 0%, rgba(165,255,97,1) 100%)",color:"#fff","&:hover":{background:"linear-gradient(90deg, rgba(165,255,97,1) 0%, rgba(97,255,111,1) 100%)"}},children:"Create"})]})]})},me=({record:o,onBack:r})=>e.jsxs(u,{sx:{maxWidth:800,margin:"0 auto",padding:4,borderRadius:"16px",position:"relative"},children:[e.jsx(u,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:80,height:80,background:"linear-gradient(135deg, #FFC1A1, #FF6F61)",borderRadius:"50%",margin:"0 auto",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.1)"},children:e.jsx(R,{sx:{color:"#fff",fontSize:"2.5rem"}})}),e.jsx(i,{variant:"h4",sx:{fontWeight:"bold",color:"var(--text-color)",textAlign:"center",marginTop:2,textShadow:"0px 1px 2px rgba(0, 0, 0, 0.3)"},children:"Medical Record Details"}),e.jsx(H,{sx:{margin:"24px 0",background:"rgba(0, 0, 0, 0.1)"}}),e.jsxs(u,{sx:{marginBottom:2},children:[e.jsx(i,{variant:"body1",sx:{fontWeight:"bold",fontSize:"1.1rem",color:"var(--text-color)",marginBottom:1},children:"Type:"}),e.jsx(i,{variant:"body2",sx:{marginBottom:2,color:"var(--text-color)"},children:o.type}),e.jsx(i,{variant:"body1",sx:{fontWeight:"bold",fontSize:"1.1rem",color:"var(--text-color)",marginBottom:1},children:"Date:"}),e.jsx(i,{variant:"body2",sx:{marginBottom:2,color:"var(--text-color)"},children:new Date(o.date).toLocaleDateString()}),e.jsx(i,{variant:"body1",sx:{fontWeight:"bold",fontSize:"1.1rem",color:"var(--text-color)",marginBottom:1},children:"Next Due Date:"}),e.jsx(i,{variant:"body2",sx:{marginBottom:2,color:"var(--text-color)"},children:o.nextDueDate?new Date(o.nextDueDate).toLocaleDateString():"N/A"}),e.jsx(i,{variant:"body1",sx:{fontWeight:"bold",fontSize:"1.1rem",color:"var(--text-color)",marginBottom:1},children:"Description:"}),e.jsx(i,{variant:"body2",sx:{marginBottom:2,color:"var(--text-color)"},children:o.description}),e.jsx(i,{variant:"body1",sx:{fontWeight:"bold",fontSize:"1.1rem",color:"var(--text-color)",marginBottom:1},children:"Notes:"}),e.jsx(i,{variant:"body2",sx:{marginBottom:2,color:"var(--text-color)"},children:o.notes||"No additional notes"}),e.jsx(i,{variant:"body1",sx:{fontWeight:"bold",fontSize:"1.1rem",color:"var(--text-color)",marginBottom:1},children:"Vet Clinic:"}),e.jsx(i,{variant:"body2",sx:{color:"var(--text-color)"},children:o.vetClinicName||"N/A"})]}),e.jsx(u,{sx:{textAlign:"center",marginTop:4},children:e.jsx(f,{variant:"contained",onClick:r,sx:{borderRadius:"50px",padding:"10px 24px",background:"linear-gradient(135deg, #FF6F61, #FFC1A1)",color:"#fff",fontWeight:"bold","&:hover":{background:"linear-gradient(135deg, #FFC1A1, #FF6F61)"}},children:"Back to Records"})})]}),Pe=()=>{const{petID:o}=Y(),[r,n]=p.useState([]),[a,t]=p.useState(null),[g,s]=p.useState(!1),[b,m]=p.useState(null),[l,h]=p.useState(!0);p.useEffect(()=>{(async()=>{if(!o){console.error("No petID provided. Skipping API call.");return}h(!0);try{const d=await se(o);n(d)}catch(d){console.error("Error fetching medical records:",d)}finally{h(!1)}})()},[o]);const v=x=>{t(x)},c=()=>{t(null)},C=()=>{m(null),s(!0)},k=x=>{m(x),s(!0)},j=()=>{s(!1)},M=async x=>{try{if(x.id||x.medicalRecordId){const d=await le(x);n(D=>D.map(I=>I.id===d.id||I.medicalRecordId===d.medicalRecordId?d:I))}else{const d=await ce(x);n(D=>[...D,d])}}catch(d){console.error("Error saving record:",d)}finally{s(!1)}},E=async x=>{try{await de(x.medicalRecordID),n(d=>d.filter(D=>D.medicalRecordID!==x.medicalRecordID))}catch(d){console.error("Error deleting record:",d)}};return e.jsx(te,{children:l?e.jsxs(u,{sx:{textAlign:"center",marginTop:4},children:[e.jsx(J,{}),e.jsx(i,{sx:{marginTop:2,color:"var(--text-color)"},children:"Loading medical records..."})]}):a?e.jsx(me,{record:a,onBack:c}):g?e.jsx(be,{petID:o,onClose:j,onSave:M,editableRecord:b}):e.jsxs(e.Fragment,{children:[e.jsx(he,{records:r,onRecordSelect:v,onEdit:k,onDelete:E}),e.jsx(pe,{color:"primary","aria-label":"add",onClick:C,sx:{position:"fixed",bottom:16,right:16,background:"linear-gradient(90deg, rgba(255,111,97,1) 0%, rgba(255,165,97,1) 100%)",color:"#fff",boxShadow:"0px 4px 20px rgba(0, 0, 0, 0.25)","&:hover":{background:"linear-gradient(90deg, rgba(255,165,97,1) 0%, rgba(255,111,97,1) 100%)"}},children:e.jsx(re,{})})]})})};export{Pe as default};
